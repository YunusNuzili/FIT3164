
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pricing Optimisation and Analysis Team 10</title>
    <!-- CSS file -->
    <link rel="stylesheet" type="text/css" href="styles.css" media="all">
    <style>
        canvas {
            background-color: white;
        }
        
    </style>
</head>
<body onload="showSection('home')">
    <header>
        <h1>Pricing Optimisation and Analysis Team 10</h1>
        <nav>
            <ul>
                <li><a href="#home" onclick="showSection('home')">Home</a></li>
                <li><a href="#about" onclick="showSection('about')">About</a></li>
                <li><a href="#services" onclick="showSection('services')">Services</a></li>
                <li><a href="#contact" onclick="showSection('contact')">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section id="home">
        <h2>Click on GET STARTED to use the price optimisation tool</h2>
        <button class="button" onclick="showSection('services')">GET STARTED</button>
    </section>

    <section id="about" style="display: none;">
        <h2>About Us</h2>
    <p>This web application is a sophisticated price optimization system that leverages historical sales data, product attributes, and market trends to determine the most profitable pricing strategies for retail items.</p>
    <h3>Understanding Price Elasticity: Maximizing Profits with Data</h3>
    <p>Central to our approach is the economic principle of price elasticity of demand, a crucial metric that quantifies how sensitive the quantity demanded of a product is to changes in its price.</p>
    <p>Price elasticity of demand is a concept from economics that measures the responsiveness, or elasticity, of the quantity demanded of a product in response to a price change. It is calculated as the percentage change in quantity demanded in response to a one percent change in price. For instance, a product with a high price elasticity is significantly affected by price changes, meaning consumers will buy much more or less of it in response to price fluctuations. Conversely, a product with low price elasticity is relatively insensitive to price changes, typically because it is a necessity or lacks adequate substitutes.</p>
    <h3>The Power of Data-Driven Pricing Strategies</h3>
    <p>Understanding and applying price elasticity effectively allows businesses to set prices that not only maximize profits but also enhance customer satisfaction and market share. When a product is priced optimally, taking into account its elasticity, businesses can strategically adjust prices to respond to market changes, competitor actions, and evolving consumer preferences without sacrificing sales volume or revenue.</p>
    <h3>Our Advanced Pricing Optimization System</h3>
    <p>Our system employs advanced analytical techniques and machine learning algorithms to model and forecast the impacts of different pricing strategies. By inputting data such as past sales, competitor pricing, and cost information, our tool predicts how adjustments in prices will affect sales volume, enabling retailers to find the price point that maximizes their profitability.</p>
    <p>This tool is particularly useful in highly competitive retail environments where pricing can be the difference between market leadership and obsolescence.</p>
    <h3>Accessible Insights for Every Retailer</h3>
    <p>Moreover, our application is designed to be user-friendly, allowing non-experts to benefit from cutting-edge economic and statistical analysis. Whether you are a small boutique or a large retailer, our tool provides valuable insights that empower you to make informed pricing decisions quickly and efficiently.</p>
    <h3>Transform Your Business with Data-Driven Decisions</h3>
    <p>In summary, by integrating the concept of price elasticity into our pricing optimization tool, we offer a powerful solution that supports dynamic pricing strategies, helps to understand consumer behavior in depth, and drives business success through data-driven decisions. Start optimizing your pricing strategy today and see how leveraging the right data can transform your business.</p>

    </section>

    <section id="contact">
        <p>We are team 10, contact Mohamed Yunus Nuzili for inquiries.
            <br>Yongkang Liu 30761840
            <br>Mohamed Yunus Nuzili 32795947 (mnuz0001@student.monash.edu)
            <br>Brandon Yap 30884977
            <br>Yinghua Sun 28981510
        </p>      
        <p>This is Project 5, which is Pricing Optimization and Analysis. This project aims to optimize pricing strategies for 
            retail products. In some retail sectors, the old methods of forecasting sales just do not work anymore. In the market 
            today, we need an approach that precisely targets the improvement of pricing strategies to increase profit margins and 
            market position.  This is all about how pricing changes can push sales and get more customers by using some high-level 
            data analytics and model building. </p>

    </section>

    <section id="services" style="display: none;">
        <h2>Optimise your preferred item's price</h2>
        <p>Enter the item details and a target date to maximise profits.</p>
        
        <!-- Item ID Input -->
        <label for="itemId">Item ID:</label>
        <input type="text" id="itemId" name="itemId">
    
        <!-- Store ID Select -->
        <label for="storeId">Store ID:</label>
        <select id="storeId" name="storeId">
            <option value="CA_1">CA_1</option>
            <option value="CA_2">CA_2</option>
            <option value="CA_3">CA_3</option>
            <option value="CA_4">CA_4</option>
            <option value="TX_1">TX_1</option>
            <option value="TX_2">TX_2</option>
            <option value="TX_3">TX_3</option>
            <option value="WI_1">WI_1</option>
            <option value="WI_2">WI_2</option>
            <option value="WI_3">WI_3</option>
        </select>

        <!-- Current Date Input -->
        <label for="currentDate">Current Date:</label>
        <input type="text" id="currentDate" name="currentDate">
    
        <!-- Target Sales Date Input -->
        <label for="targetSalesDate">Target Sales Date:</label>
        <input type="text" id="targetSalesDate" name="targetSalesDate">

    
        <!-- Submit Button -->
        <button onclick="submitForm()">Submit</button>
    
        <!-- Result Section (Initially Hidden) -->
        <div id="resultSection" style="display: none;">
            <h2>Result</h2>
            <div id="visualization"></div>
            <canvas id="priceChart"></canvas>
            <p id="suggestion"></p>
        </div>

        
        
    </section>
    
    <div id="resultSection" style="display: none;">
        <h2>Result</h2>
        <div id="visualization"></div>
        <canvas id="priceChart"></canvas>
        <p id="suggestion"></p>
    </div>

    <footer>
        <p>&copy; Team 10</p>
    </footer>

    <script>
        function showSection(sectionId) {
            // hide all section
            var sections = document.querySelectorAll('section');
            sections.forEach(function(section) {
                section.style.display = 'none';
            });

            // show all section
            var sectionToShow = document.getElementById(sectionId);
            if(sectionToShow) {
                sectionToShow.style.display = 'block';
            }
        }

        function submitForm() {
            // Get input values
            var itemId = document.getElementById("itemId").value;
            var storeId = document.getElementById("storeId").value;
            var targetSalesDate = document.getElementById("targetSalesDate").value;
            var currentDate = document.getElementById("currentDate").value;
            
            
            // Check if the values are valid
            if (itemId === "" || storeId === "" || targetSalesDate === "" || currentDate === "") {
                alert("Please enter ");
                return; // If any input is empty, stop
            }
            
            // Check if the date format and Target date after current date
            var dateRegex = /^\d{2}\/\d{2}\/\d{4}$/; // dd/mm/yy format
            if (!dateRegex.test(targetSalesDate) || !dateRegex.test(currentDate)) {
                alert("format: 'dd/mm/yyyy' ");
                return; // if invaid stop
            }
            
            var targetSalesDateParts = targetSalesDate.split("/");
            var currentDateParts = currentDate.split("/");
            
            var targetSalesDateObj = new Date(targetSalesDateParts[2], targetSalesDateParts[1] - 1, targetSalesDateParts[0]); // day,month,year value, starting from 0
            var currentDateObj = new Date(currentDateParts[2], currentDateParts[1] - 1, currentDateParts[0]); // day,month,year value, starting from 0
            
            if (currentDateObj >= targetSalesDateObj) {
                alert("Target Sales Date must after Current Date");
                return; // if inviaid,stop
            }

            // Check if targetSalesDateObj year is same as currentDateObj year
            if (currentDateObj.getFullYear() !== targetSalesDateObj.getFullYear()) {
                alert("Target Sales Date year must be the same as Current Date year.");
                return; // If invalid, stop
            }

            // Check itemID
            var regex = /^[a-zA-Z]+_\d{1}_\d{3}$/;
            if (regex.test(itemId)) {

            } else {
                alert("Invalid itemID format. Please enter a valid itemID in the format 'DEPT_X_XXX'.\n DEPT includes [HOBBIES,HOUSEHOLD,FOODS]");
            }
            var formData = {
                itemId: itemId,
                storeId: storeId,
                targetSalesDate: targetSalesDate,
                currentDate: currentDate,
            };

            // Send an AJAX request to your Flask endpoint
            fetch('http://127.0.0.1:5000/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                displayResults(data);
            })
            .catch(error => console.error('Error:', error));
        }


        function displayResults(data) {
    var resultSection = document.getElementById("resultSection");
    resultSection.style.display = "block";
    
    // Check if an original price detail container already exists and clear it or create a new one
    var originalPriceDetail = document.querySelector('.original-price-detail');
    if (originalPriceDetail) {
        // If it exists, update the content only
        originalPriceDetail.innerHTML = '<span class="price-detail">Original Price: $<span class="price">' + data.base_price + '</span></span>';
    } else {
        // If it does not exist, create it and insert it below the "Result" header
        originalPriceDetail = document.createElement('div');
        originalPriceDetail.className = 'original-price-detail';
        originalPriceDetail.innerHTML = '<span class="price-detail">Original Price: $<span class="price">' + data.base_price + '</span></span>';
        var header = document.querySelector('#resultSection h2');
        header.parentNode.insertBefore(originalPriceDetail, header.nextSibling);
    }

    // Update the suggestion element with the optimized price and discount rate
    var suggestionElement = document.getElementById("suggestion");
    suggestionElement.innerHTML = 
        '<div class="price-header">Suggested optimal price and discount rate:</div>' +
        '<span class="price-detail">Optimized Price: $<span class="price">' + data.optimized_price + '</span></span>' +
        '<span class="price-detail">Discount Rate: <span class="price">' + data.discount + '%</span></span>';

    // Update visualization and chart
    var ctx = document.getElementById('priceChart').getContext('2d');
    if (window.myChart) {
        window.myChart.destroy();
    }
    window.myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: data.x_pred,
            datasets: [{
                label: 'Predicted Sales Change vs. Price Change',
                data: data.y_pred,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            },{
                label: 'Sales Changes',
                data: data.y_values.map((value, index) => ({ x: data.x_values[index], y: value })),
                backgroundColor: 'rgba(255, 99, 132, 0.5)',
                pointRadius: 10,
                pointHoverRadius: 8,
                showLine: false
            }]
        },
        options: {
            plugins: {
            title: {
                display: true,
                text: 'Price Elasticity for the Item',
                font: {
                            size: 24
                        }
            }
        },
            responsive: true,
            maintainAspectRatio: true,
            scales: {
                y: {
                    beginAtZero: false,
                    title: {
                        display: true,
                        text: 'Sales Change(%)',
                        color: '#111',
                        font: {
                            size: 16
                        }
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Price Change(%)',
                        color: '#111',
                        font: {
                            size: 16
                        }
                    }
                }
            }
        }
    });
}





        
    </script>
</body>
</html>